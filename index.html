<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CCTV 전국 현황(12권역)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
    h1 { font-size: 20px; margin: 0 0 8px; }
    .sub { color:#666; margin: 0 0 18px; font-size: 13px; }

    .layout { display: grid; grid-template-columns: 360px 1fr; gap: 14px; }
    @media (max-width: 980px) { .layout { grid-template-columns: 1fr; } }

    .grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
    button.btn {
      width: 100%;
      text-align: left;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid #ddd;
      background: #fff;
      cursor: pointer;
    }
    button.btn:hover { border-color:#bbb; }
    button.btn.active { border-color:#111; box-shadow: 0 0 0 2px rgba(0,0,0,0.06); }

    .note { font-size:12px; color:#666; margin-top:6px; }

    .panel {
      border: 1px solid #ddd;
      border-radius: 14px;
      overflow: hidden;
      background: #fff;
      min-height: 520px;
      display: flex;
      flex-direction: column;
    }
    .panelHead {
      padding: 12px 14px;
      border-bottom: 1px solid #eee;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .titleBox { display:flex; flex-direction:column; gap: 4px; }
    .panelTitle { font-weight: 700; }
    .panelMeta { font-size: 12px; color:#666; }

    .actions { display:flex; gap: 8px; align-items:center; }
    a.linkBtn {
      display:inline-block;
      padding: 8px 10px;
      border: 1px solid #ddd;
      border-radius: 10px;
      text-decoration:none;
      color:#111;
      font-size: 12px;
      background:#fff;
      white-space:nowrap;
    }

    .viewer {
      flex: 1;
      background: #fafafa;
      position: relative;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: 0;
      background: #fff;
    }

    .empty {
      padding: 24px;
      color:#666;
      font-size: 13px;
      line-height: 1.6;
    }
    .hint { margin-top: 10px; font-size: 12px; color:#888; }
    .warn { margin-top: 8px; font-size: 12px; color:#b26a00; }
  </style>
</head>
<body>
  <h1>권역별 CCTV 바로보기</h1>
  <p class="sub">버튼을 누르면 이 페이지 안에서 CCTV 화면을 표시합니다.</p>

  <div class="layout">
    <div>
      <div id="grid" class="grid"></div>
    </div>

    <div class="panel">
      <div class="panelHead">
        <div class="titleBox">
          <div id="panelTitle" class="panelTitle">선택된 CCTV 없음</div>
          <div id="panelMeta" class="panelMeta">왼쪽에서 권역을 선택하세요.</div>
        </div>
        <div class="actions">
          <a id="openNew" class="linkBtn" href="#" target="_blank" rel="noopener noreferrer" style="display:none;">새창으로 열기</a>
          <a id="openDirect" class="linkBtn" href="#" target="_self" rel="noopener noreferrer" style="display:none;">바로가기</a>
        </div>
      </div>
      <div class="viewer">
        <div id="empty" class="empty">
          좌측 버튼을 누르면 여기에서 CCTV 페이지가 표시됩니다.<br/>
          <div class="warn">※ 일부 CCTV 사이트는 보안정책(X-Frame-Options/CSP) 때문에 페이지 내 표시가 막힐 수 있습니다.</div>
          <div class="hint">그 경우, 우측 상단의 “새창으로 열기”를 사용하세요.</div>
        </div>
        <iframe id="frame" src="about:blank" style="display:none;"></iframe>
      </div>
    </div>
  </div>

  <script>
    // ✅ 여기에 네 리스트를 그대로 넣으면 됨
    // Apps Script로 만들면 JSON.stringify(list, null, 2) 결과를 붙여넣으면 끝
    const CCTV_LIST = [
      // 예시:
      // { region: "수도권(서울) 시청", url: "https://www.utic.go.kr/view/map?cctvid=..." , note:"시청 중심" },
      // { region: "수도권(서울) 이면", url: "https://www.utic.go.kr/view/map?cctvid=..." , note:"이면도로" }
    ];

    const grid = document.getElementById("grid");
    const frame = document.getElementById("frame");
    const empty = document.getElementById("empty");
    const panelTitle = document.getElementById("panelTitle");
    const panelMeta = document.getElementById("panelMeta");
    const openNew = document.getElementById("openNew");
    const openDirect = document.getElementById("openDirect");

    let activeBtn = null;

    function selectItem(item, btn) {
      if (activeBtn) activeBtn.classList.remove("active");
      activeBtn = btn;
      activeBtn.classList.add("active");

      panelTitle.textContent = item.region || "CCTV";
      panelMeta.textContent = item.note ? item.note : " ";

      // iframe로 페이지 안에 표시
      empty.style.display = "none";
      frame.style.display = "block";
      frame.src = item.url;

      // 보조 링크(필요하면 사용)
      openNew.style.display = "inline-block";
      openNew.href = item.url;

      openDirect.style.display = "inline-block";
      openDirect.href = item.url; // 같은 페이지 이동용(원하면 제거 가능)
    }

    function render() {
      if (!CCTV_LIST || CCTV_LIST.length === 0) {
        grid.innerHTML = '<div style="color:#999;font-size:13px;">CCTV_LIST가 비어있습니다.</div>';
        return;
      }

      CCTV_LIST.forEach(item => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "btn";
        btn.innerHTML = `
          <div><b>${escapeHtml(item.region || "CCTV")}</b></div>
          ${item.note ? `<div class="note">${escapeHtml(item.note)}</div>` : ""}
        `;
        btn.addEventListener("click", () => selectItem(item, btn));
        grid.appendChild(btn);
      });

      // 첫 번째 자동 선택(원하면 주석)
      selectItem(CCTV_LIST[0], grid.querySelector("button.btn"));
    }

    function escapeHtml(s){
      return String(s || "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    render();
  </script>
</body>
</html>
